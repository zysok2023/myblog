# python基础知识

## 变量
在程序设计中，变量是一种存储数据的载体。计算机中的变量实际是存储器中存储数据的一块内存空间，变量的值可以被读取和修改，这是所有计算和控制的基础。
python中的变量仅仅只是用来保存一个数据对象的地址。无论是什么数据对象，在内存中创建好数据对象之后，都只是把它的地址保存到变量名中。所以变量名是类型无关的，但它指向的值是类型相关的，可以是数值、字符串、列表、函数、类、对象等等。这些内存对象中都至少包含3部分：对象类型、对象的引用计数(用来判断改对象是否可被垃圾回收器回收)、对象的值。
python中的变量命名时只能包含数字、大小写字母、下划线这三种类型的字符，并且数字不能是首字符。
还有一些有特殊意义的变量命名方式
1. 单个下划线 _
通常用作一个临时的占位符或者无关重要的变量名，表示一个不需要使用的值
2. 单个前导下划线 _var
表示这个变量或者方法是“私有的”，不应该被直接访问。虽然 Python 并不会严格限制对这些变量的访问，但是开发者通常将它们视为内部实现的一部分，而不是公共 API 的一部分。
3. 单个后续下划线 var_
通常用于避免与 Python 关键字或者内置函数命名冲突，或者避免与同名的 Python 标准库模块冲突。
4. 双前导下划线 __var（name mangling）
在类定义中，双下划线开头的变量名会进行名称修饰（name mangling），Python 会在变量名前面加上 _ClassName 来防止子类中的命名冲突。
例如，在类 A 中，__var 变量会被重命名为 _A__var，这样子类 B 中的同名变量不会与其冲突。
5. 双前后下划线 \__var__
这种命名方式通常被 Python 保留用于特殊用途，例如魔术方法（magic methods）或者特殊变量，如 \__init__、\__repr__ 等。
约定俗成的命名方式
1. 常量以全大写字符表示
2. 普通变量、函数名、方法名都以小写字母开头命名
3. 模块名、包名以全小写字母命名
4. 类名以大写字母开头
python中变量赋值的几种形式。
```python
x = "long"                  # (1).基本形式
x, y = "long", "shuai"      # (2).元组对应赋值
[x, y] = ["long", "shuai"]  # (3).列表对应赋值
a, b, c, d = "long"         # (4).序列赋值
a, *b = 'long'              # (5).解包赋值
a = b = "long"              # (6).多目标赋值
a += 3                      # (7).二元赋值表达式
((a, b), c) = ('lo','ng')   # (8).嵌套赋值序列
```
在 Python 中，序列（sequence）是一种有序的数据结构，它包含了一系列的元素，每个元素都有一个唯一的索引。
python赋值时，总是先计算"="右边的结果，然后将结果按照赋值方式赋值给"="左边的变量
当使用一个*前缀变量的时候，表示将序列中对应的元素全部收集到一个列表中(注意，总是一个列表)，这个列表名为*开头的那个变量名。*号可以出现在任意位置处，只要赋值的时候能前后对应位置关系即可。不管如何，收集的结果总是列表，只不过可能是空列表或者只有一个元素的列表。
解包返回的一定是列表，但序列切片返回的内容则取决于序列的类型。
在python中的某些情况下，这种二元赋值表达式可能比普通的赋值方式效率更高些。原因有二：
1. 二元赋值表达式中，a可能会是一个表达式，它只需计算评估一次，而a = a + 3中，a要计算两次。
2. 对于可变对象，可以直接在原处修改得到修改后的值，而普通的一元赋值表达式必须在内存中新创建一个修改后的数据对象，并赋值给变量
```python
L = [1,2,3]
L = L + [4]     # (1)：慢
L += [4]        # (2)：快
L.append(4)     # (3)：快，等价于(2)

L = L + [5,6]   # (4)：慢
L += [5,6]      # (5)：快
L.extend([5,6]) # (6)：快，等价于(5)
```
按照理论上来说，确实二元赋值方式要效率高一些，但要注意的是，列表中保存的只是各元素的引用，所以拷贝列表也仅仅只是拷贝一点引用，这是微乎其微的开销。所以一元赋值和二元赋值的差距在这一点的性能上基本没差距，主要的差距还在于一元、二元赋值方式可能存在的表达式不同评估次数。
使用二元赋值表达式通常可以作为可变对象赋值的一种优化手段

## 基本数据类型
python中总共分为6种基本的数据类型
1. 不可变类型
又叫静态数据类型，没有增删改操作，包括数字(number)、字符串(string)、元组(tuple)
2. 可变类型
又叫动态数据类型，支持增删改操作，包括列表(list)、字典(dict)、集合(set)
数字类型还可分为:整数(int)、浮点数(float)、复数(complex)、布尔(bool)
字符串必须使用''或""括起来，对于特殊字符可以使用反斜杠\进行转义，用+拼接多个字符串， 用*复制字符串，字符串还支持索引截取(又叫切片)
列表是一组可重复且有序的数据集合，任何类型的数据都可以存到列表中，会根据需要动态分配和回收内存，是Python中使用最频繁的数据类型，列表同样也支持索引截取(又叫切片)，列表中的元素是可变的，能够进行增删改操作
元组也是一组可重复且有序的对象集合，任何类型的数据都可以存到元组中，但是元组中的元素是不可变的，元组同样也支持索引截取(又叫切片)
字典是一组可变的无序的对象集合，字典中的元素是通过键(Key) : 值(Value)来保存的，一组键值对称为一个元素，其中键(Key)不可重复，必须唯一，而值(Value)是可重复的，字典会浪费较大内存，是一种使用空间换时间的数据类型
集合是一组可变的、无序的且不可重复的元素序列，可以理解为是没有Key值得字典，基本功能是测试元素之间的关系和删除重复元素，比如：共同好友、你可能认识的人、关注TA的人还关注了…等
注意点：
1. python 3.x中的整数不区分一般整数和长整型整数，3.x版本中的整数支持无穷精度
2. 任何时候浮点数都是不精确的。当带有小数点或科学计数的标记符号e或E，就表示这是浮点数
- 当浮点数参与表达式的运算时，会以浮点数的规则进行运算，也就是整数会转换成浮点数类型
- python中的浮点数精度和C语言的双精度浮点数精度相同
3. 整数除了十进制整数外，还可以写成二进制、八进制、十六进制甚至是其它进制的整数
- 当一个整数以0b或0B开头，其后都是0、1时，默认识别为二进制整数
- 当一个整数以0o或0O开头(数值零和大、小写的字母o)，其后都是0-7之间的数值时，默认识别为8进制整数
- 当一个整数以0x或0X开始，其后都是[0-9a-fA-F]之间的字符时，默认识别为十六进制




## 运算符
Python 语言支持以下类型的运算符:
- 算术运算符
- 比较（关系）运算符
- 赋值运算符
- 逻辑运算符
- 位运算符
- 成员运算符
- 身份运算符
- 运算符优先级
### 数值基本运算
支持最基本的数学运算符号：+ - * / % **、取正负+x -x，地板除法//，除法和取模divmod(x, y)：
注意事项：
1. python中的除法运算/得到的结果总是浮点数(例如9/3=3.0)，后面还有一种地板除法(floor)不一样
2. 当数值部分有小数时，会自动转换为浮点数类型进行运算，而且会自动忽略参与运算的小数尾部的0
3. 加号+和乘号*也能处理字符串
  - +可以连接字符串，例如"abc" + "def"得到abcdef
  - *可以重复字符串次数，例如"a"*3得到"aaa"，"ab"*3得到"ababab"
### 其它数学运算方法
```python
# 几个python的内置数学函数
pow()：求幂，如pow(2,3)=8
abs()：求绝对值，如abs(-3)=3
round()：四舍五入，如round(3.5)=4
int()：取整(截去小数部分)，如int(3.5)=3
float()：转换成浮点数，如float(3)=3.0
oct()：十进制整数转换成八进制
hex()：十进制整数转换成十六进制整数
bin()：十进制整数转换成二进制
...等等
```
还有专门的数学模块math、取随机数的模块random等。
### 浮点数
由于硬件的原因，使得计算机对于浮点数的处理总是不精确的。
例如，按照数学运算时，1.1-0.9=0.2，但实际得到的结果为：
```python
>>> 1.1-0.9
0.20000000000000007
```
它以高精度的极限趋近的值来显示。上面的趋近结果大于按照数学运算结果，但并不总是如此，例如下面的运算则是小于数学运算的结果：
```python
>>> 3.3-3.2
0.09999999999999964
```
由于浮点数不精确，所以尽量不要对两个浮点数数进行等值==和不等值!=比较.如果非要比较，应该通过它们的减法求绝对值，再与一个足够小(不会影响结果)的值做不等比较。
```python
>>> (3.2-2.8) == 0.4
False

>>> abs((3.2-2.8)-0.4) < 0.0002
True
```
最后，浮点数并非总是输出很长精度的值。正如前面的运算：
浮点数有两个特殊方法，一个是is_integer()，用来测试这个浮点数是否是整数，另一个是as_integer_ratio()，可以将浮点数转换成分子分母组成的元组，不过这个方法并非总是如你所想的那样友好。例如:
```python
>>> (3.0).is_integer()
True
>>> (3.2).is_integer()
False

>>> (2.5).as_integer_ratio()
(5, 2)
>>> (2.6).as_integer_ratio()
(5854679515581645, 2251799813685248)
```
浮点数总是不精确的，而且不能指定小数位数。但在python中，有一个专门的小数模块decimal，它可以提供精确的小数运算，还有一个分数模块fractions，也能提供精确的小数运算。
### 真除法、Floor除法和小数位截断
- /：实现的是真除法。在python中，它总是返回浮点数值。
- //：实现的是floor地板除法，它会去掉除法运算后的小数位，以便得到小于运算结果的最大整数。如果参与运算的有小数，则返回浮点数，否则返回整数
- 在math模块中，有地板函数math.floor()和天花板函数math.ceil()。它们的意义可以根据现实中地板、空气、天花板的高低位置来考虑。地板位于空气之下，地板运算的返回值是比空气小的最大整数，天花板位于空气之上，天花板运算的的返回值是比空气大的最小整数
- round(x, N)是四舍五入，可以指定四舍五入到哪个小数位
- math.trunc()是直接截断小数
- 实际上int()函数自身就是字节截断小数的
### 数值类型的转换
- int()可以将字符串或浮点数转换成整数，也可以用于进制数转换
- float()可以将字符串或整数转换成浮点数
实际上它们表示根据给定参数在内存中构造一个整数、浮点数对象，所以可以用来作为类型转换工具。而且，前面已经说过，int()可以用来截断小数位。
int()还可用于进制数转换，
```python
int(x, base=10)
```
base指定要将x解释成哪个进制位的数，然后转换成十进制数，也就是前面说的构造一个整数对象。不指定base时，默认解释成10进制。
base的值可以是0或2-36之间的任意一个数，base=0也表示解释成10进制。
### 小数类型(Decimal)
小数模块decimal，它有一个函数Decimal()，它是精确的，是可以指定小数位数的。
```python
import decimal
decimal.Decimal('0.1') * 3 - decimal.Decimal('0.3')
```
注意，Decimal()的参数都是字符串，如果不加引号，它还是会解释成浮点数。

### 分数(Fraction)
分数模块fractions，它有一个函数Fraction()，它可以构建分数。有了分数之后，可以参与运算。分数和浮点数不同，分数是精确的。
```python
# 分数加、减、乘、除分数
fractions.Fraction(1,3) + fractions.Fraction(2,3)
fractions.Fraction(1,3) - fractions.Fraction(2,3)
fractions.Fraction(1,3) * fractions.Fraction(2,3)
fractions.Fraction(1,3) / fractions.Fraction(2,3)
```
## 布尔类型
python中True表示真，False表示假，它们是布尔类型：
```python
type(True)
<class 'bool'>
```
在python中，bool的True和False是数值1和0的数值表示格式，实际上bool类型是int类型的一个子类。
因为True/False是数值1和0的另一种表示方式，它们可以直接参与数值运算。
```python
True + 2
```
### True/False的各种形式
虽然True代表1，False代表0。但实际上，python中的任何一个数据对象要么是True，要么是False，所以可以直接在布尔测试的表达式中使用，而并非一定要去大小比较、通过函数测试等等。比如：
那么，哪些类型的数据是True，哪些类型的数据是False？
- 整数值0、浮点数值0.0等、空字符串都为假
- None为假
- 空数据对象都是假，比如[]、{}、()等
  - 注意，元组的括号和逗号的特殊性。例如(None)、(1)这些都不是元组，而是单个数据对象，加上逗号才算是元组。所以，使用括号包围但却不是元组的数据，如果它们是假，则整个返回假，而不是元组看上去不为空而返回真
  - 注意(())表示一个空元组，使用 () 包裹另一对括号时，Python 将解释为一个空元组
**实际上，一个数据对象是真还是假，是根据这个类型的__bool__()的返回值(为False则为假)以及__len__()的返回值(为0则为假)来决定的。**

## None
None为假，它不是表示对象为空，也不是表示对象未定义。它自身就是一个实实在在的数据对象，在内存中有自己的内存地址，而且整个python全局只有一个唯一的None对象。可以认为，None是一种特殊的数据对象，像数值1、字符串'a'一样，只不过内存中这个数据对象里面存储的数据是我们不得而知的，但它永远表示为False。
在Python中，没有显式定义return语句的函数、方法并不意味着没有返回值，它们的默认返回值是None。比如print()函数：
## 逻辑运算：and、or、not
python中只支持字符形式的and、or、not逻辑运算，不支持符号类型的&&、||、!
not优先级很低，所以not a == b等价于not (a == b)
需要注意，and和or会短路运算(即只要能确定真假关系，就立即停止运算)，并返回运算的结果(不是返回True/False，而是返回表达式的运算结果)。而not运算是返回True/False的。
```python
2 and 3, 3 and 2
[] and {}
3 and []
```
上面第一行and测试，因为and左边的都是True，所以必须得评估and右边的值，那么不管and右边是True还是False，都会返回and右边的值，比如第一行and测试，第三行and测试。第二行and测试中，因为and左边为False，所以直接能确定为False，所以直接短路返回[]。
再次说明，and、or返回的不是True/False的布尔值，而是逻辑表达式的运算结果。但因为python中只要是数据，要么是True，要么是False，所以and/or/not都可以用于真假测试，只不过and/or还可以在布尔测试的基础上进行赋值操作。
## 空、非空测试的建议
经常会遇到要测试数据是否为空。这里的空可能是None、""、[]、{}、()中的一种，建议不要使用len() == 0去测试,而是直接将数据作为真、假值进行判断：
```python
if x:
if not x:
```
## 等值、大小比较
在python中，只要两个对象的类型相同，且它们是内置类型(字典除外)，那么这两个对象就能进行比较。关键词：内置类型、同类型。所以，两个对象如果类型不同，就没法比较，比如数值类型的数值不能和字符串类型的数值或字母比较。
比较操作符有：
```python
==  !=  <  <=  >  >=
```
python中同类型的内置类型对象(字典除外)，都是从左开始，一个一个元素向后比较，就算中间遇到嵌套的容器结构(如list/tuple/Set)，也会递归到嵌套的结构中去一个个比较。
注意，**None对象只能参与等值和不等值比较，不能参与大小比较**。
python支持连续比较，连续比较时等价于使用and运算。
连续比较是一种比较语法，它不仅限于数值的连续比较，还支持其它类型。比如：
```python
"ac" > "ab" < "ad"
```
### is 和 ==
有两种比较数据对象是否相等的方式："=="和"is"，它们的否定形式分别为"!="和"is not"。
它们都是比较表达式，但却是完全不同的比较方式：
- "=="和"!="符号比较的是数据的值是否相等、相同
- "is"比较的是两个数据对象在内存中是否是同一个数据对象。换句话说，比较的是内存地址

## python中的字符串
在python 3.x中，字符串的类型str是Unicode的。除此之外还有byte类型、bytearray类型。
python中可以使用单引号、双引号、三引号包围字符串，并可以使用反斜线转义特殊字符：
- 单、双引号是完全一致的，不像其他语言一样有强、弱引用之分
- 三引号('''xxx'''或"""xxx""")包围的字符完全是字面符号，包围什么就得到什么，包括换行，且不会进行任何转义、替换等
   - 使用这种块字符串的方式，在输入需要换行的字符串时非常方便
   - 而且可以作为块注释符注释一段代码。这表示这段被包围的代码解释为字符串，但因为没有赋值给变量，所以直接丢弃了
- 反斜线\可以转义特殊字符，例如在字符串中保留单引号"a\'b"

### raw字符串
虽然可以通过反斜线\转义去调整字符串，但带上反斜线有时候会严重影响可读性。如果不想使用反斜线转义，可以考虑使用三引号包围，也可以使用r来声明后面的字符串是raw字符串，这里面的所有字符都是字面意义的，不会进行任何转义。
注意，raw字符串不能以反斜线结尾，除非对其转义。例如r'abc\ndef\'是错误语法，但r'abc\ndef\\'是正确的语法，它表示后面有两个反斜线字符
### 字符串转换
数值和字符串类型不能直接放在一起操作，例如9 + "9"是错误的。要将一个数值类型转换成字符串类型，可以使用str()方法或repr()方法。
### 操作字符串
1. 在python中，操作字符串的方式有多种，大概概括有：
字符串是一个序列，且是不可变序列，所以序列的通用操作和不可变序列的操作都能应用在str上
2. string对象自身实现了很多方法，比如大小写转换、子串搜索、截断等等
3. 字符串连接，如"abc" "def"或"abc" + "def"是等价的，都是"abcdef"，"a" * 3得到"aaa"
4. 字符串格式化
因为python中的字符串是一种序列类型，所以可以使用in来测试字符串中是否包含某个字符或子串。
### 字符串的索引和分片操作
字符串是一种序列，可以应用序列的一种非常方便的分片操作。
必须注意，因为字符串是不可变对象，无法原处修改，所以无论是索引取值还是分片操作，都会创建新字符串对象。
### 索引取单个元素
索引位可以是负数，表示从尾部开始取元素，-1表示倒数第一个元素，-2表示倒数第二个元素。
### 分片取多个元素
分片的方式是使用[i:j]或[i:j:k]的方式，表示从索引位i开始取到索引位j(不包含j)，i或j都可以省略。如果指定了k，则表示每隔k个元素取一次，也就是取一次元素之后跳过(k-1)一个元素。i、j、k都可以使用负数。



























































